{% extends "home.html" %}
{% load math_filters %}
{% load i18n %}

{% block content %}
<div class="container py-4">
    <h2 class="text-2xl font-semibold mb-4">{% translate "Your Cart" %}</h2>

    {% if cart_items %}
    <div class="bg-white rounded-xl shadow p-4 space-y-4">
        {% with total=0 %}
        {% for item in cart_items %}
            <div class="flex items-center gap-4 border-b pb-4">
                <img src="{{ item.camera.image.url }}" alt="{{ item.camera.model_name }}" class="w-24 h-24 object-cover rounded-md">
                <div class="flex-grow">
                    <h3 class="text-lg font-medium">{{ item.camera.model_name }}</h3>
                    <p class="text-gray-600">{% translate "Quantity" %}: {{ item.quantity }}</p>
                    <p class="text-gray-600">{% translate "Unit Price" %}: ${{ item.camera.price }}</p>
                    <p class="text-blue-700 font-semibold">
                        {% translate "Subtotal" %}: ${{ item.quantity|multiply:item.camera.price }}
                    </p>
                </div>
            </div>
        {% endfor %}
        {% endwith %}

        <!-- Total Price -->
        <div class="text-right pt-4">
            <h3 class="text-xl font-semibold text-green-600">
                {% translate "Total" %}:
                ${{ cart_items|sum_cart_total }}
            </h3>
        </div>
    </div>
    {% else %}
        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md" role="alert">
            <p>{% translate "Your cart is empty." %}</p>
        </div>
    {% endif %}
</div>
{% endblock %}
